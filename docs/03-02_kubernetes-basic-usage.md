# 3장. 컨테이너를 다루는 표준 아키텍처, 쿠버네티스

> 3.1 쿠버네티스 이해하기
> 3.2 쿠버네티스 기본 사용법 배우기
> 3.3 쿠버네티스 연결을 담당하는 서비스
> 3.4 알아두면 쓸모 있는 쿠버네티스 오브젝트
> 본 문서는 3장의 일부 내용 중 **3.2 쿠버네티스 기본 사용법 배우기** 중 일부를 정리한 내용입니다.

## 3.2쿠버네티스 기본 사용법 배우기

## 파드 생성 방법

- `run`으로 생성 시:  
  단일 파드 1개만 생성됨.

- `create deployment`로 생성 시:  
  디플로이먼트(Deployment)라는 관리 그룹 내에서 파드 생성됨.

> 쿠버네티스 1.18 이전: `run` 명령으로도 디플로이먼트 생성

---

## 오브젝트란?

파드와 디플로이먼트는 `spec`, `status` 등의 값을 가진 단위 → 이를 오브젝트라고 함.

### 기본 오브젝트

- **Pod**: 실행 최소 단위.  
  보통 1개의 컨테이너를 가짐. 독립 IP와 파일 시스템 제공.

- **Namespace**: 리소스 구분 관리용 그룹  
  - default  
  - kube-system  
  - metallb-system 등

- **Volume**: 파드 내에서 사용할 수 있는 디렉터리.  
  기본 파드는 휘발성이므로 볼륨으로 영속 저장 가능.

- **Service**: 파드 접속 정보를 고정하고 내·외부 연결을 지원함.

📌 참고: 157page, 그림 3-19 — 쿠버네티스 기본 오브젝트

---

## 디플로이먼트

- 파드를 효율적으로 관리하기 위한 상위 오브젝트
- 복제, 업데이트, 롤백 등 고급 기능 포함
- 기반은 파드

> 이외 오브젝트: DaemonSet, ReplicaSet, ConfigMap, PV/PVC, StatefulSet 등

---

## 레플리카셋으로 파드 수 관리

- 파드 수를 보장하는 역할
- 예: 3개 파드 선언 시, 컨트롤러 매니저 + 스케줄러가 클러스터에 3개 생성 유지

📌 참고: 163page, 그림 3-24 — 레플리카셋으로 파드 3개 생성

> 디플로이먼트를 통해 레플리카셋 포함한 관리 권장

---

## 오브젝트 스펙 파일

- `kubectl create deployment`로는 파드 1개만 생성됨  
  (replicas 설정 불가)

- 여러 파드를 만들고 싶으면 YAML로 작성한 오브젝트 **스펙 파일** 필요

---

## apply로 오브젝트 생성/관리

- `run`: 단순, 테스트용 단일 파드 생성  
- `create`: 단발성 생성, 변경 어려움  
- `apply`: 스펙 파일 기반으로 오브젝트 생성 및 변경 가능

> 오브젝트에 변경이 생길 수 있다면 **apply 사용 권장**
